<!DOCTYPE html>
<html lang="en" xmlns:nn="https://github.com/zahatan/nanojs">
<head>
    <meta charset="UTF-8">
    <title>View example</title>
</head>
<body>

<script src="/js/nano.js" type="text/javascript"></script>
<script type="text/javascript">
    window.addEventListener('DOMContentLoaded', (event) => {

        class DocumentLoadHandler extends JsonResponseHandler {
            /**
             * Handle 2XX, 3XX request
             */
            on_request_success(xhr, response, json) {
                console.log('success', response);
                let body = document.getElementsByTagName('body');
                console.log(body);
                body[0].innerHTML = response;
            }

            /**
             * Handle 4XX, 5XX
             */
            on_request_error(xhr, response, json) {
                console.log('error', response);
            }

            /**
             * Other error
             */
            on_request_failed() {

            }
        }

        let responseHandler = new DocumentLoadHandler();

        let data = new NRequestData();
        data.set('query', { task : 'todo' });


        let request = new LaravelRequest({
            response_handlers: [responseHandler]
        });
        request.prepare('post', 'http://localhost:8000/view.html');
        request.send(data);
    });

</script>
</body>
</html>